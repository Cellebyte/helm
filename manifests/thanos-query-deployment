{
   "apiVersion": "apps/v1",
   "kind": "Deployment",
   "metadata": {
      "labels": {
         "app": "thanos-query"
      },
      "name": "thanos-query",
      "namespace": "monitoring-system"
   },
   "spec": {
      "replicas": 2,
      "selector": {
         "matchLabels": {
            "app": "thanos-query"
         }
      },
      "template": {
         "metadata": {
            "labels": {
               "app": "thanos-query"
            }
         },
         "spec": {
            "containers": [
               {
                  "args": [
                     "query",
                     "--log.level=info",
                     "--query.replica-label=prometheus_replica",
                     "--store=dnssrv+_grpc._tcp.prometheus-k8s.monitoring-system.svc.cluster.local"
                  ],
                  "image": "quay.io/thanos/thanos:v0.10.1",
                  "name": "thanos-query",
                  "ports": [
                     {
                        "containerPort": 10902,
                        "name": "http"
                     },
                     {
                        "containerPort": 10901,
                        "name": "grpc"
                     }
                  ]
               }
            ]
         }
      }
   }
}
